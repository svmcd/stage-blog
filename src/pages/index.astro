---
import Layout from "../layouts/Layout.astro";
import { SignIn, SignOut } from "auth-astro/components";

import { getSession } from "auth-astro/server";
import { Posts } from "../components/Posts";

const session = await getSession(Astro.request);
---

<Layout>
  <main>
    <Posts />
    <SignIn provider="discord">sign in</SignIn>
    <SignOut>sign out</SignOut>
    {session ? <p>Welcome {session.user?.name}</p> : <p>Not logged in</p>}
  </main>
</Layout>
